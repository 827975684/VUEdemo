<!DOCTYPE html>
<!-- saved from url=(0072)http://code.tarena.com.cn/WEBCode/wfd2002/10_JSCORE/day04/4_closure.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=GBK">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    //需&#65533;: 定义一个函数为小孩儿管理压岁钱
    //  小孩儿每花一笔钱，可以从总钱数中扣除花的钱，提示还剩xxx
    //3&#65533;: 
    //1. 定义一个外层函数，包裹要保护的变量和内层函&#65533;
    function parent(){
      var total=1000;
      //2. 外层函数将内层函数对象返回到函数外部，让外部可用
      //不用给内层函数起名字
      return function(money){//小孩&#65533; //局&#65533;
              total-=money;
              console.log(`花了${money}, 还剩${total}`)
             }
    }
    //3. 想用内层函数的人需要调用外层函数，才能获得返回出来的内层函数，保存在变量中，反复使用&#65533;
    var pay=parent();
    //pay:function(money){//小孩&#65533; //局&#65533;
    //      total-=money;
    //      console.log(`花了${money}, 还剩${total}`)
    //    }

    total=0; //试图篡改total变量

    pay(100); //花了100, 还剩900
    pay(100); //花了100, 还剩800
    pay(100); //花了100, 还剩700
  </script>

</body></html>